<h1>Cart</h1>

<%= form_with url: new_transaction_path, method: :get do |form| %>
  <%= form.hidden_field :category, value: "product" %>
  <% @cart_items.each do |item| %>
    <div class="border-red-400 border-solid border-2 w-1/3">
      <%= image_tag item.product.product_image.variant(resize_to_limit: [nil, 100]) %>
      <%= link_to "#{item.product.product_name}", product_path(item) %>
      <%= item.quantity %>
      <%= item.product.price %>
      <%= link_to "Remove", cart_path(item.id), method: :delete %>
      <br>
      <input type="checkbox" name="i[]" value="<%= item.id %>" id="i_<%= item.id %>">
      <label for="i_<%= item.id %>">Add to checkout</label>
    </div>
  <% end %>
  
  <% unless @cart_items.length == 0 %>
    <%= form.submit "Proceed to Checkout" %>
  <%end%>
<%end%>

<% if @cart_items.length == 0 %>
  <div>You have no items in your cart, click <%= link_to "HERE", products_path %> to start adding items!</div>
<%end%>